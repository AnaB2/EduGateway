{"ast":null,"code":"import { saveToken, removeToken } from './storage';\nconst API_URL = 'http://localhost:4321';\nexport async function logoutUser(navigation) {\n  try {\n    await removeToken();\n    navigation('/');\n  } catch (error) {\n    console.log(\"Error al cerrar sesión\");\n    throw error;\n  }\n}\nexport async function loginUser(userData, navigation) {\n  try {\n    const response = await fetch(`${API_URL}/log-in`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(userData)\n    });\n    if (!response.ok) {\n      throw new Error('Network response was not ok');\n    }\n    const responseData = await response.json();\n\n    // Verifica si la respuesta incluye un token\n    if (responseData.token) {\n      // Guarda el token en el almacenamiento local del navegador\n      saveToken(responseData.token, responseData.email, responseData.userType, responseData.name, responseData.id);\n\n      // Redirige a la página correspondiente\n      if (responseData.userType === 'participant') {\n        navigation('inicio-participante'); // Redirige a la página de participante\n      } else if (responseData.userType === 'institution') {\n        navigation('inicio-institucion'); // Redirige a la página de institución\n      }\n    } else {\n      // Si la respuesta no incluye un token, lanza un error\n      throw new Error('Token not found in response');\n    }\n    return responseData; // Devuelve la respuesta completa, que puede contener otros datos además del token\n  } catch (error) {\n    console.error(\"Failed to login:\", error);\n    throw error;\n  }\n}","map":{"version":3,"names":["saveToken","removeToken","API_URL","logoutUser","navigation","error","console","log","loginUser","userData","response","fetch","method","headers","body","JSON","stringify","ok","Error","responseData","json","token","email","userType","name","id"],"sources":["C:/Users/marpr/proyects/EduGateway/src/main/js/front-edu-gateway/src/services/auth.js"],"sourcesContent":["import { saveToken, removeToken} from './storage';\r\nconst API_URL = 'http://localhost:4321';\r\n\r\nexport async function logoutUser(navigation){\r\n    try {\r\n        await removeToken();\r\n        navigation('/')\r\n    }catch (error){\r\n        console.log(\"Error al cerrar sesión\")\r\n        throw error\r\n    }\r\n}\r\n\r\nexport async function loginUser(userData, navigation){\r\n\r\n    try {\r\n        const response = await fetch(`${API_URL}/log-in`, {\r\n            method: 'POST',\r\n            headers: {'Content-Type': 'application/json',},\r\n            body: JSON.stringify(userData),\r\n        });\r\n\r\n        if (!response.ok) {\r\n            throw new Error('Network response was not ok');\r\n        }\r\n\r\n        const responseData = await response.json();\r\n\r\n        // Verifica si la respuesta incluye un token\r\n        if (responseData.token) {\r\n            // Guarda el token en el almacenamiento local del navegador\r\n            saveToken(responseData.token, responseData.email, responseData.userType, responseData.name, responseData.id);\r\n\r\n            // Redirige a la página correspondiente\r\n            if (responseData.userType === 'participant') {\r\n                navigation('inicio-participante'); // Redirige a la página de participante\r\n\r\n            } else if (responseData.userType === 'institution') {\r\n                navigation('inicio-institucion'); // Redirige a la página de institución\r\n            }\r\n        } else {\r\n            // Si la respuesta no incluye un token, lanza un error\r\n            throw new Error('Token not found in response');\r\n        }\r\n\r\n        return responseData; // Devuelve la respuesta completa, que puede contener otros datos además del token\r\n    } catch (error) {\r\n        console.error(\"Failed to login:\", error);\r\n        throw error;\r\n    }\r\n}"],"mappings":"AAAA,SAASA,SAAS,EAAEC,WAAW,QAAO,WAAW;AACjD,MAAMC,OAAO,GAAG,uBAAuB;AAEvC,OAAO,eAAeC,UAAUA,CAACC,UAAU,EAAC;EACxC,IAAI;IACA,MAAMH,WAAW,CAAC,CAAC;IACnBG,UAAU,CAAC,GAAG,CAAC;EACnB,CAAC,QAAOC,KAAK,EAAC;IACVC,OAAO,CAACC,GAAG,CAAC,wBAAwB,CAAC;IACrC,MAAMF,KAAK;EACf;AACJ;AAEA,OAAO,eAAeG,SAASA,CAACC,QAAQ,EAAEL,UAAU,EAAC;EAEjD,IAAI;IACA,MAAMM,QAAQ,GAAG,MAAMC,KAAK,CAAC,GAAGT,OAAO,SAAS,EAAE;MAC9CU,MAAM,EAAE,MAAM;MACdC,OAAO,EAAE;QAAC,cAAc,EAAE;MAAmB,CAAC;MAC9CC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACP,QAAQ;IACjC,CAAC,CAAC;IAEF,IAAI,CAACC,QAAQ,CAACO,EAAE,EAAE;MACd,MAAM,IAAIC,KAAK,CAAC,6BAA6B,CAAC;IAClD;IAEA,MAAMC,YAAY,GAAG,MAAMT,QAAQ,CAACU,IAAI,CAAC,CAAC;;IAE1C;IACA,IAAID,YAAY,CAACE,KAAK,EAAE;MACpB;MACArB,SAAS,CAACmB,YAAY,CAACE,KAAK,EAAEF,YAAY,CAACG,KAAK,EAAEH,YAAY,CAACI,QAAQ,EAAEJ,YAAY,CAACK,IAAI,EAAEL,YAAY,CAACM,EAAE,CAAC;;MAE5G;MACA,IAAIN,YAAY,CAACI,QAAQ,KAAK,aAAa,EAAE;QACzCnB,UAAU,CAAC,qBAAqB,CAAC,CAAC,CAAC;MAEvC,CAAC,MAAM,IAAIe,YAAY,CAACI,QAAQ,KAAK,aAAa,EAAE;QAChDnB,UAAU,CAAC,oBAAoB,CAAC,CAAC,CAAC;MACtC;IACJ,CAAC,MAAM;MACH;MACA,MAAM,IAAIc,KAAK,CAAC,6BAA6B,CAAC;IAClD;IAEA,OAAOC,YAAY,CAAC,CAAC;EACzB,CAAC,CAAC,OAAOd,KAAK,EAAE;IACZC,OAAO,CAACD,KAAK,CAAC,kBAAkB,EAAEA,KAAK,CAAC;IACxC,MAAMA,KAAK;EACf;AACJ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}